---
title: "Map of Charlottesville Region Gardens"
author: "Lee LeBoeuf"
date: "3/30/2022"
output: 
  html_document: 
    code_folding: hide
---

Below is a basic example of the type of map interactive map we can make displaying the city gardens in the Charlottesville region. The map shows all of the gardens for which the Equity Center has data:

  * Urban Agriculture Collective and City Schoolyard gardens were identified with help from Cultivate and Richard Morris
  * International Rescue Committee (IRC) shared the locations of their gardens with us
  * Taha Suhrawardy provided some of the geo-location and meta-data for many of the gardens
  * Some garden locations were geo-coded using Open Street Map
    
We have created a [google spreadsheet](https://docs.google.com/spreadsheets/d/1b0HLvY_5OtaK-Z__lOLhjkFHSS5bmTYSQBMcumyRmRk/edit?usp=sharing) with all of the meta-data we have for each garden. 


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(sf)
library(leaflet)
library(DT)
library(rgeos)

gardendat <- readRDS("gardens_geo.RDS")
```

## Map

```{r}

leaflet() %>% 
  addProviderTiles("CartoDB.Positron") %>% 
  addCircleMarkers(data = gardendat[gardendat$Managed_by == "IRC New Roots",],
                   group = "IRC",
                   color = "yellow", 
                   radius = 8,
                   popup = paste0("Location: ", gardendat$Garden_property_name, "<br>",
                                  "Managed/Owned by: ", "IRC New Roots", "<br>",
                                  "Size: ", gardendat$Size)) %>%
    addCircleMarkers(data = gardendat[gardendat$Managed_by == "Urban Agriculture Collective" & gardendat$Status == "Existing",],
                     group = "Urban Agr Collective",
                   color = "purple", 
                   radius = 8,
                   popup = paste0("Location: ", gardendat$Garden_property_name, "<br>",
                                  "Managed/Owned by: ", "Urban Agriculture Collective", "<br>",
                                  "Size: ", gardendat$Size)) %>%
      addCircleMarkers(data = gardendat[gardendat$Managed_by == "City Schoolyard Garden",],
                       group = "City Schoolyard",
                   color = "green", 
                   radius = 8,
                   popup = paste0("Location: ", gardendat$Garden_property_name, "<br>",
                                  "Managed/Owned by: ", "City Schoolyard", "<br>",
                                  "Size: ", gardendat$Size)) %>%
    addCircleMarkers(data = gardendat[gardendat$Status == "Lost",], group = "Lost gardens",
                   color = "red", 
                   radius = 8,
                   popup = paste0("Location: ", gardendat$Garden_property_name, "<br>",
                                  "Managed/Owned by: ", "Urban Agriculture Collective", "<br>",
                                  "Size: ", gardendat$Size))%>% 
      addLayersControl(
        overlayGroups = c("IRC", "Urban Agr Collective", "City Schoolyard", "Lost gardens"),
        options = layersControlOptions(collapsed = FALSE), 
        position = "bottomright"
      )

```

